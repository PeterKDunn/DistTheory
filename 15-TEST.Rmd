
# Testing {#TESTING}




## This works {#TESTING-ONE-CODE}


```{r echo=FALSE}
# The code, which is reused for display
my_Code <- quote(
  plot(cars, main = "Speed vs. Stopping Distance",
       xlab = "Speed (mph)", 
       ylab = "Stopping Distance (ft)",
       col = "blue", pch = 16, cex = 1.2, lwd = 2, las = 1)
)
```


```{r plot-genA, echo=FALSE, fig.show='hide'}
eval(my_Code)
plot_Path <- knitr::fig_chunk('plot-gen', 'pdf')
```


```{=latex}
\begin{figure}[htbp]
  \centering
  \includegraphics[width=0.9\linewidth]{`r plot_Path`}
  \vspace{0.5em} % Small vertical space between plot and code

  \begin{minipage}{0.9\linewidth}
    \begin{lstlisting}[language=R]
`r paste(deparse(my_Code), collapse = "\n")`
    \end{lstlisting}
  \end{minipage}

  \caption{Speed vs. Stopping Distance: Plot and Corresponding R Code}
  \label{fig:cars-plot-code} % Give your figure a unique label
\end{figure}
```


```{r plot-onlyHTMLA, echo=FALSE, fig.cap="A scatter plot of cars data.", out.width='100%', eval=knitr::is_html_output(), include=knitr::is_html_output()} 
eval(my_Code)
```

```{r html-code-display3, echo=FALSE, results='asis', eval=knitr::is_html_output(), collapse=TRUE}
cat('<details><summary>Show R code</summary>\n\n')
show_md_Code(my_Code)
cat('\n</details>')
```













<!-- ####################################################### -->
## Test: works but not as good {#TESTING-WORK}


Some text here.
Some text here.
Some text here.
Some text here.
Some text here.
Some text here.
Some text here.
Some text here.
Some text here.
Some text here.
Some text here.
Some text here.
Some text here.


```{r echo=FALSE}
code_text <- '
 plot(cars, main = "Speed vs. Stopping Distance",
      xlab = "Speed (mph)", ylab = "Stopping Distance (ft)",
      col = "blue", pch = 16, cex = 1.2, lwd = 2, las = 1)'
```

<!-- LATEX CODE -->
```{r plot-gen, echo=FALSE, fig.show='hide'}
# This R code generates the plot image file.
# fig.show='hide' prevents knitr from automatically inserting the image.
plot(cars, main = "Speed vs. Stopping Distance",
     xlab = "Speed (mph)", ylab = "Stopping Distance (ft)",
     col = "blue", pch = 16, cex = 1.2, lwd = 2, las = 1)

# This chunk runs BEFORE the raw LaTeX block.
# It gets the actual path to the generated PDF plot and stores it in an R variable.
plot_path <- knitr::fig_chunk('plot-gen', 'pdf')
```


```{=latex}
\begin{figure}[htbp]
\centering
% Dynamically include the plot generated by the 'plot-gen' chunk.
% knitr::fig_chunk() gets the correct path to the PDF image.
\includegraphics[width=0.9\linewidth]{`r plot_path`}
\vspace{0.5em} % Small vertical space between plot and code

\begin{minipage}{0.9\linewidth}
\begin{lstlisting}[language=R]
plot(cars, main = "Speed vs. Stopping Distance",
  xlab = "Speed (mph)", ylab = "Stopping Distance (ft)",
  col = "blue", pch = 16, cex = 1.2, lwd = 2, las = 1)
\end{lstlisting}
\end{minipage}

\caption{Speed vs. Stopping Distance: Plot and Corresponding R Code}
\label{fig:cars-plot-code} % Give your figure a unique label
\end{figure}
```


<!-- HTML CODE -->
```{r plot-onlyHTML, echo=FALSE, fig.cap="A scatter plot of cars data.", fig.pos='H', out.width='100%', eval=knitr::is_html_output(), include=knitr::is_html_output()} 
plot(cars, main = "Speed vs. Stopping Distance",
     xlab = "Speed (mph)", 
     ylab = "Stopping Distance (ft)",
     col = "blue", pch = 16, 
     cex = 1.2, lwd = 2, las = 1)
```
```{=html}
<details>
<summary>Show R code</summary>

<pre><code class="language-r">
plot(cars, main = "Speed vs. Stopping Distance",
     xlab = "Speed (mph)", ylab = "Stopping Distance (ft)",
     col = "blue", pch = 16, cex = 1.2,
     lwd = 2, las = 1)
</code></pre>
</details>
```


