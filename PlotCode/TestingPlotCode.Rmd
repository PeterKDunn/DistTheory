
```{r echo=FALSE}
# The code, which is reused for display
my_Code <- quote(
  plot(cars, main = "Speed vs. Stopping Distance",
       xlab = "Speed (mph)", 
       ylab = "Stopping Distance (ft)",
       col = "blue", pch = 16, cex = 1.2, lwd = 2, las = 1)
)
```


```{r plot-genZ, echo=FALSE, fig.show='hide'}
eval(my_Code)
plot_Path <- knitr::fig_chunk('plot-gen', 'pdf')
```


```{=latex}
\begin{figure}[htbp]
  \centering
  \includegraphics[width=0.9\linewidth]{`r plot_Path`}
  \vspace{0.5em} % Small vertical space between plot and code

  \begin{minipage}{0.9\linewidth}
    \begin{lstlisting}[language=R]
`r paste(deparse(my_Code), collapse = "\n")`
    \end{lstlisting}
  \end{minipage}

  \caption{Speed vs. Stopping Distance: Plot and Corresponding R Code}
  \label{fig:cars-plot-code} % Give your figure a unique label
\end{figure}
```


```{r plot-onlyHTMLZ, echo=FALSE, fig.cap="A scatter plot of cars data.", out.width='100%', eval=knitr::is_html_output(), include=knitr::is_html_output()} 
eval(my_Code)
```

```{r html-code-display3, echo=FALSE, results='asis', eval=knitr::is_html_output(), collapse=TRUE}
cat('<details><summary>Show R code</summary>\n\n')
show_md_Code(my_Code)
cat('\n</details>')
```



