

<!-- Read the code -->
```{r NoMeanPlot, echo=FALSE, fig.show='hide', fig.width=6, fig.height=4, out.width='70%'}
my_Code <- readLines("ProbFnNoMean.R")
eval(parse(text = my_Code))
plot_Path <- knitr::fig_chunk('NoMeanPlot', 
                              'pdf')
```


<!-- ******************* LATEX: image + code display together ******************* -->
```{=latex}
\begin{figure}[htbp]
  \centering
  \includegraphics[width=0.8\linewidth]{`r plot_Path`}
  \vspace{0.5em} % Small vertical space between plot and code

  \begin{minipage}{0.9\linewidth}
    \begin{lstlisting}[language=R]
`r paste(my_Code, collapse = "\n")`
    \end{lstlisting}
  \end{minipage}

  \caption{The probability function for the random variable $Z$. The mean is not defined.}
  \label{fig:NoMean} 
\end{figure}
```




<!-- ******************* HTML: image, then code display ******************* -->
```{r echo=FALSE, fig.cap="A scatter plot of cars data.", out.width='100%', eval=knitr::is_html_output(), include=knitr::is_html_output()}
eval(parse(text = my_Code))
```


```{r echo=FALSE, results='asis', eval=knitr::is_html_output()}
code_html <- show_code_from_file("ProbFnNoMean.R")
code_html <- c('<details><summary>Show R code</summary>\n\n',
               code_html,
               '\n</details>\n')
cat(paste(code_html, collapse = "\n"))
```


