

```{r echo=FALSE}
# The code, which is reused for display
my_Code2 <- quote({
    z <- seq(1, 6, 
           length = 100)
  plot(x = z,
       y = z^(-2),
       type = "l",
       lwd = 2,
       xlim = c(0, 6),
       ylim = c(-0.025, 1),
       las = 1,
       xlab = expression( italic(z)),
       ylab = "Density",
       main = expression(paste(The~probability~"function for"~italic(Z))))
  lines( x = c(-1, 1),
         y = c(0, 0),
         lwd = 2) # Line for x = 0 to x = 1
  abline(v = 1,
         lwd = 1,
         col = "grey",
         lty = 2) # Dotted vertical line
  points(x = 1,
         y = 0,
         pch = 1) # Show open point
})
```


```{r NoMeanPlot, echo=FALSE, fig.show='hide', fig.width=6, fig.height=4, out.width='70%'}
my_Code <- readLines("ProbFnNoMean.R")
eval(parse(text = my_Code))
plot_Path <- knitr::fig_chunk('NoMeanPlot', 'pdf')
```


```{=latex}
\begin{figure}[htbp]
  \centering
  \includegraphics[width=0.6\linewidth]{`r plot_Path`}
  \vspace{0.5em} % Small vertical space between plot and code

  \begin{minipage}{0.9\linewidth}
    \begin{lstlisting}[language=R]
`r paste(my_Code, collapse = "\n")`
    \end{lstlisting}
  \end{minipage}

  \caption{The probability function for the random variable $Z$. The mean is not defined.}
  \label{fig:NoMean} 
\end{figure}
```



```{r NoMeanPlotHTML, echo=FALSE, fig.cap="A scatter plot of cars data.", out.width='100%', eval=knitr::is_html_output(), include=knitr::is_html_output()}
eval(parse(text = my_Code))
```



<!-- ```{r, echo=FALSE, results='asis', warning=FALSE} -->
<!-- lines <- readLines("ProbFnNoMean.R", warn = FALSE) -->
<!-- print(lines) -->
<!-- ``` -->


```{r echo=FALSE, results='asis', eval=knitr::is_html_output()}
cat("BOO\n")
cat(show_code_from_file("ProbFnNoMean.R"))
cat("BOO\n")
```



```{r echo=FALSE, results='asis', eval=knitr::is_html_output()}
cat("FRED\n")
show_code_from_file("ProbFnNoMean.R")
cat("FRE\n")
```


```{r}
code_html <- show_code_from_file("ProbFnNoMean.R")
code_html <- c('<details><summary>Show R code</summary>\n\n',
               code_html,
               '\n</details>\n')
code_len <- length(code_html)
```

```{r echo=FALSE, results='asis', eval=knitr::is_html_output()}
cat(paste(code_html, collapse = "\n"))
```


BOOFHEAD 


```{r NoMeanHTMLCode, echo=FALSE, results='asis', eval=knitr::is_html_output()}
cat('<details><summary>Show R code</summary>\n\n')
cat(show_code_from_file("ProbFnNoMean.R"))
cat('\n</details>')
```



